#!/usr/bin/env zsh

SCRIPT_DIR="$(cd "$(dirname "${0:a}")" && pwd)"
DBUSER="${PG_DATABASE_USER:-postgres}"
DBNAME="${PG_DATABASE_NAME:-default}"

cat <<-EOF
[Script path]:        $SCRIPT_DIR
[Local user]:         $USER
[Postgres username]:  $DBUSER
[Database name]:      $DBNAME
EOF

# Make sure a role for the local user exists
docker exec -it twenty-db-1 createuser \
  --createdb  --no-createrole --superuser $USER \
  --host 127.0.0.1 --username "$DBUSER"
